<template>
<!--Button Create a new interview-->
<lightning-card>
 
   

    <div class="slds-clearfix">
       <div class="slds-float_right">
         
                <lightning-button label="Créer un nouveau Entretien" variant="brand" onclick={handlePopup}></lightning-button>
                

   <div class="chart slds-m-around_medium" lwc:dom="manual"></div>
   <section
     id="modal"
     role="dialog"
     tabindex="-1"
     aria-labelledby="modal-heading-01"
     aria-modal="true"
     aria-describedby="modal-content-id-1"
     class="slds-modal slds-fade-in-open slds-hide"
   >
     <div class="slds-modal__container">
       <header class="slds-modal__header">
         <button class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse" title="Close" onclick={handleCloseModal}>
           <lightning-icon icon-name="utility:close" variant="inverse" alternative-text="Close" size="medium">
           </lightning-icon>
           <span class="slds-assistive-text">Close</span>
       </button>
         <h2 id="modal-heading-01" class="slds-modal__title slds-hyphenate">
          Nouveau Entretien
         </h2>
       </header>
       <div
         class="slds-modal__content slds-p-around_medium"
         id="modal-content-id-1"
       >
         <div class="slds-p-bottom_large slds-p-left_large" style="width:500px">
           <lightning-card >
             <div class="slds-section slds-is-open">
                
               <div aria-hidden="false" class="slds-section__content">
                 <!-- <lightning-layout multiple-rows="true" vertical-align="end">
                   <lightning-layout-item size="6" small-device-size="2" medium-device-size="4" large-device-size="4" padding="around-small">
                           <div class="slds-form-element">
                               <div class="slds-form-element__control">
                                
                               </div>
                           </div>
                   </lightning-layout-item>
               </lightning-layout><br/> -->
           
                <!-- Selected Record Type Id: <b>{selectedValue}</b>-->

<!--FORM HEREonsuccess={handleSuccess}   onsuccess={createInterview}-->
<lightning-record-edit-form object-api-name="Interview__c"  >  

    <div class="slds-m-around_medium" style="width:550px">
      <div class="slds-section slds-is-open">
        <h3 class="slds-section__title">
          <button aria-controls="expando-unique-id" aria-expanded="true" class="slds-button slds-section__title-action">
            <svg class="slds-section__title-action-icon slds-button__icon slds-button__icon_left" aria-hidden="true">
              <use xlink:href="/assets/icons/utility-sprite/svg/symbols.svg#switch"></use>
            </svg>
            <span class="slds-truncate" title="Section Title">Informations Entretien</span>
          </button>
        </h3>
        <div aria-hidden="false" class="slds-section__content" id="expando-unique-id">
      <div class="slds-grid slds-gutters">
        <div class="slds-col slds-size_1-of-2">
        <lightning-input-field   field-name='Name' onchange={handleNameChange}  required="required" > </lightning-input-field>

        <lightning-input-field   field-name='Duree__c'   onchange={handleTimeChange}   > </lightning-input-field>
        <lightning-input-field   field-name='Type__c' onchange={handleTypeChange}   > </lightning-input-field>
        </div>
        <div class="slds-col slds-size_1-of-2">

        <lightning-input-field   field-name='Compte__c' onchange={handleCompteChange}   > </lightning-input-field>

       
        <lightning-input-field   field-name='Job_Num__c' onchange={handleJobChange}   > </lightning-input-field>
        <lightning-input-field   field-name='Demandeur_d_emploi__r.Num_Demandeur_d_emploi__c' onchange={handleDomnumChange}   > </lightning-input-field>
        <div class="slds-p-around_medium lgc-bg">
          <lightning-helptext content="Si vous fournissez l'heure de l'entretien un email va être envoyer aux candidat et jury !"></lightning-helptext>

          <lightning-input-field   field-name='Heure_de_l_entretien__c' onchange={handleHourChange}   > </lightning-input-field>
      </div>

      </div></div></div></div>  
<div class="slds-section slds-is-open">
  <h3 class="slds-section__title">
    <button aria-controls="expando-unique-id2" aria-expanded="true" class="slds-button slds-section__title-action">
      <svg class="slds-section__title-action-icon slds-button__icon slds-button__icon_left" aria-hidden="true">
        <use xlink:href="/assets/icons/utility-sprite/svg/symbols.svg#switch"></use>
      </svg>
      <span class="slds-truncate" title="Section Title">Personnes Entretien</span>
    </button>
  </h3>
  <div aria-hidden="false" class="slds-section__content" id="expando-unique-id2">
       <lightning-input-field   field-name='Candidat__c' onchange={handleCandidatChange}  required="required" > </lightning-input-field>
     <!-- <lightning-input-field   field-name='Email_de_Candidat__c' onchange={handleEmailChange}> </lightning-input-field>--> 
     <lightning-input-field   field-name='Nom_du_Jury__c' onchange={handleJuryChange}  required="required"    > </lightning-input-field>
  
     <lightning-input-field   field-name='Recruteur_du_Job__c' onchange={handleJobRecChange}   > </lightning-input-field>
</div></div>
 
<div class="slds-section slds-is-open">
  <h3 class="slds-section__title">
    <button aria-controls="expando-unique-id3" aria-expanded="true" class="slds-button slds-section__title-action">
      <svg class="slds-section__title-action-icon slds-button__icon slds-button__icon_left" aria-hidden="true">
        <use xlink:href="/assets/icons/utility-sprite/svg/symbols.svg#switch"></use>
      </svg>
      <span class="slds-truncate" title="Section Title">Autre</span>
    </button>
  </h3>
  <div aria-hidden="false" class="slds-section__content" id="expando-unique-id3"> 
      <lightning-input-field   field-name='Commentaires_sur_l_entretien__c' onchange={handleCommentChange}   > </lightning-input-field>
</div></div>
    </div> 
    </lightning-record-edit-form> 

 
     <center>
            <ul class="slds-button-group-row">
              <li class="slds-button-group-item">
                <button onclick={handleSkip} class="slds-button slds-button_neutral">Annuler
                </button>  
              </li>
           
              <li class="slds-button-group-item">
                <button onclick={createInterview} class="slds-button slds-button_brand">Enregistrer</button>
              </li>
            </ul>
        </center >
           



    
 
</div>   
</div>
</lightning-card>    
</div>
</div>

</div>
</section>
<div
class="slds-backdrop slds-backdrop_open slds-hide modalBackdrops"
id="modalBackdrops"
></div>    
</div>   
</div> 

        <!-- Data table to diplay accounts -->
        <div class="table-contacts">
            <lightning-datatable 
                data={interviews}
                columns={columns}
                key-field="id"
                max-row-selection={maxRowSelection}
                show-row-number-column=true
                onrowselection={getSelectedContact}
                onrowaction={openRecord}
                class="ls-datatable"
                min-column-width="185px">
            </lightning-datatable>  
        </div>
    </lightning-card>

    <template if:true={recordId}>
        <div class="slds-m-top_small">
            <lightning-layout>
                <lightning-layout-item size="8" class="slds-p-right_x-small">
                    <lightning-card variant="Narrow" title="Entretien" icon-name="standard:contact">
                        <div class="slds-p-horizontal_medium">
                            <lightning-record-form 
                                record-id={recordId} 
                                object-api-name="Interview__c"
                                fields={fields}
                                columns="2"
                                mode="readonly"     
                            ></lightning-record-form> 
                        </div>   
                    </lightning-card>
                </lightning-layout-item>
                <lightning-layout-item size="4" class="slds-p-left_x-small">    
                </lightning-layout-item>
            </lightning-layout>
        </div>
    </template>

 


 
</template>